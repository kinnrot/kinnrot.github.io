---
layout: post
title: Event Base WPF Navigation
date: '2010-10-12T12:44:00.000-07:00'
author: Chen Kinnrot
tags: 
modified_time: '2010-10-12T12:44:17.538-07:00'
blogger_id: tag:blogger.com,1999:blog-8908829452516573489.post-1808201403549125269
blogger_orig_url: http://kinnrot.blogspot.com/2010/10/event-base-wpf-navigation.html
---

Hello,<br /><br />My Recent problem was: <i>How can I implement minimal decoupling navigation between views?</i><br /><br />I thought about using the <a href="http://www.google.co.il/search?hl=iw&amp;q=EventAggregator&amp;meta=&amp;aq=f&amp;aqi=g-s1&amp;aql=&amp;oq=&amp;gs_rfai=">EventAggregator</a> already built in my system and create some kind of event that represents a navigation request, so I&nbsp;created a NavigationRequestEvent that contains the view model I want to activate and view.<br /><br />Next question I asked myself was: &nbsp;<i>Who needs to request for navigation?</i><br /><i><br /></i><br />This is easy navigation is caused 99% of the times by user interaction, views is a good answer, through their view models or some commands (if not<a href="http://www.google.co.il/#hl=iw&amp;q=DelegateCommand&amp;meta=&amp;aq=f&amp;aqi=g-s1&amp;aql=&amp;oq=&amp;gs_rfai=&amp;fp=8bbed8b7b324a60c"> DelegateCommands</a> or <a href="http://www.google.co.il/url?sa=t&amp;source=web&amp;cd=1&amp;ved=0CAgQFjAA&amp;url=http%3A%2F%2Fcaliburn.codeplex.com%2F&amp;ei=Abi0TLjWKs3Cswa6ysGsCA&amp;usg=AFQjCNEU7re61lN7tQ4BNijEoX0NXtNF6A&amp;sig2=x4Cmo1bQvpS0UezUbDJg_w">SmarterStuff</a>).<br />The problem is that my view models are being created from my <a href="http://www.google.co.il/#hl=iw&amp;q=wiki%3A+IOC+Container&amp;meta=&amp;aq=f&amp;aqi=&amp;aql=&amp;oq=&amp;gs_rfai=&amp;fp=8bbed8b7b324a60c">IOC Container</a>&nbsp;(not a problem) and I don't want all of my view models to have access to my container cause this is an anti pattern.<br /><br /><i>Who'll construct the view model and fire the event?</i><br /><br />Create a view models factory that will be responsible for creating the view models, he is not the actual factory, just a mediator between the request and the container.<br /><br />So far we got:<br /><br /><ul><li>NavigationRequestEvent that holds the view model to show</li><li>ViewModelsFactory - can create view models</li></ul><br />Now I just need someone to listen, this is the advantage of this pattern, anyone can listen and no one is also an option, but nothing will happen of course.<br /><br />In my case the shell is the default listener and each event would be translated to a view shown at the main region of the ui , there is also an option of a split view, when split view activated the main region unregister from event and secondary view is listening to the event.<br />We can also expend this behavior and allow user to choose where next views will be opened.<br /><br />IsNice = True;