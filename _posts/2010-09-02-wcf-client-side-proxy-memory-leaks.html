---
layout: post
title: WCF client side proxy memory leaks
date: '2010-09-02T12:34:00.000-07:00'
author: Chen Kinnrot
tags:
- memory leak
- wcf
modified_time: '2010-09-02T12:34:26.511-07:00'
blogger_id: tag:blogger.com,1999:blog-8908829452516573489.post-5906390913173720867
blogger_orig_url: http://kinnrot.blogspot.com/2010/09/wcf-client-side-proxy-memory-leaks.html
---

Today I ran into a guy who worked with me on my previous project.<br />On that project I was responsible to rewrite the WCF channels (proxies) generation management and lifetime management of them.<br />I decided to do some research and found some good stuff <a href="http://wcfguidanceforwpf.codeplex.com/">here</a>.<br />So this guy (aka Kurki) tells me they found a memory leak in my manager, what was the problem?<br /><br />So i messed up like I always do (well, only 90% of the time, like a good programmer).<br /><br />I wrote a code that registers to the Faulted event of the channel, kills the channel when Faulted and creates a new one to work with, everything looked fine, only one screw up (I'm sure some of you can guess).<br />I forgot to unregister from the Faulted Event.<br /><br />On the web they tell you to do some unique logic to kill your channel in a safe way, what they don't talk about is that it'll stay in memory and fire events if you won't unregister from stuff&nbsp;although&nbsp;you think it is dead.<br /><br />So please <u>do not forget to unregister from stuff even if the object is disposable</u>.<br /><br />Or consider the use of weak event listeners and problem solved.