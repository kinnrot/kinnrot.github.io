I"ñ<p>Let‚Äôs say we write an infrastructure of entities and their interaction with Nhibernate and the rest of the server side logic.<br />We want Nhibernate to do whatever it needs. But we also want to limit the application programmer from doing crazy things, for example: Setting the Unique Identifier of an existing entity to another value. I know it sounds crazy but in a medium-sized team, anything can happen and this stuff is critical for the future.<br /><br />So I thought about a very KIS way to implement this kind of protection.<br /><br />* What I write here is the most readable version of my code, you can extract method, use interceptor, AOP, whatever works for you.<br /><br />&lt;pre class="brush: csharp;"&gt;private long _id;<br /><br />public long ID<br />{<br />  get { return _id; }<br />  set<br />  {<br />    if (!_id.Equals(default(long)) &amp;&amp; !_id.Equals(value))<br />    {<br />      throw new InvalidOperationException(<br />        ‚ÄúYou can‚Äôt set this property, it has already been set‚Äù);<br />    }<br />    _id = value;<br />  }<br />}<br /><br />&lt;/pre&gt;<br />Very simple, easy to test, and it works with NHibernate proxy.</p>
:ET