<!DOCTYPE html>
<html lang="en" dir="auto" data-theme="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Simulate Click on Google Geo Chart | cdblg</title>
<meta name="keywords" content="browser-automation, testing, capybara, maps, google-charts">
<meta name="description" content="So I found out it&rsquo;s not so documented, hopefully google will index this.
I have a page on my  system that shows a google geo chart (same as this)
When clicking on a country on the map lot&rsquo;s of interesting things happens. And I wanted to implement a ui automation test to cover this use case.
It&rsquo;s not so easy cause even if you find the right svg path object and try clicking on it you get some interception errors.
So I googled a bit without any luck, but the geo chart documents came to the rescue.">
<meta name="author" content="Chen Kinnrot">
<link rel="canonical" href="https://kinnrot.github.io/simulate-click-on-google-geo-chart/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.da3211e5ef867bf2b75fd5a6515cfed7195c011e8ab735694e203810a827097b.css" integrity="sha256-2jIR5e&#43;Ge/K3X9WmUVz&#43;1xlcAR6KtzVpTiA4EKgnCXs=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://kinnrot.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://kinnrot.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://kinnrot.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://kinnrot.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://kinnrot.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://kinnrot.github.io/simulate-click-on-google-geo-chart/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
                color-scheme: dark;
            }

            .list {
                background: var(--theme);
            }

            .toc {
                background: var(--entry);
            }
        }

        @media (prefers-color-scheme: light) {
            .list::-webkit-scrollbar-thumb {
                border-color: var(--code-bg);
            }
        }

    </style>
</noscript>
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.querySelector("html").dataset.theme = 'dark';
    } else if (localStorage.getItem("pref-theme") === "light") {
       document.querySelector("html").dataset.theme = 'light';
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.querySelector("html").dataset.theme = 'dark';
    } else {
        document.querySelector("html").dataset.theme = 'light';
    }

</script>

<script async src="https://www.googletagmanager.com/gtag/js?id=G-BYC49T802E"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-BYC49T802E');
</script>
<meta property="og:url" content="https://kinnrot.github.io/simulate-click-on-google-geo-chart/">
  <meta property="og:site_name" content="cdblg">
  <meta property="og:title" content="Simulate Click on Google Geo Chart">
  <meta property="og:description" content="So I found out it’s not so documented, hopefully google will index this. I have a page on my system that shows a google geo chart (same as this) When clicking on a country on the map lot’s of interesting things happens. And I wanted to implement a ui automation test to cover this use case.
It’s not so easy cause even if you find the right svg path object and try clicking on it you get some interception errors. So I googled a bit without any luck, but the geo chart documents came to the rescue.">
  <meta property="og:locale" content="en-us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2020-01-22T21:27:38+02:00">
    <meta property="article:modified_time" content="2020-01-22T21:27:38+02:00">
    <meta property="article:tag" content="Browser-Automation">
    <meta property="article:tag" content="Testing">
    <meta property="article:tag" content="Capybara">
    <meta property="article:tag" content="Maps">
    <meta property="article:tag" content="Google-Charts">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Simulate Click on Google Geo Chart">
<meta name="twitter:description" content="So I found out it&rsquo;s not so documented, hopefully google will index this.
I have a page on my  system that shows a google geo chart (same as this)
When clicking on a country on the map lot&rsquo;s of interesting things happens. And I wanted to implement a ui automation test to cover this use case.
It&rsquo;s not so easy cause even if you find the right svg path object and try clicking on it you get some interception errors.
So I googled a bit without any luck, but the geo chart documents came to the rescue.">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://kinnrot.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Simulate Click on Google Geo Chart",
      "item": "https://kinnrot.github.io/simulate-click-on-google-geo-chart/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Simulate Click on Google Geo Chart",
  "name": "Simulate Click on Google Geo Chart",
  "description": "So I found out it\u0026rsquo;s not so documented, hopefully google will index this. I have a page on my system that shows a google geo chart (same as this) When clicking on a country on the map lot\u0026rsquo;s of interesting things happens. And I wanted to implement a ui automation test to cover this use case.\nIt\u0026rsquo;s not so easy cause even if you find the right svg path object and try clicking on it you get some interception errors. So I googled a bit without any luck, but the geo chart documents came to the rescue.\n",
  "keywords": [
    "browser-automation", "testing", "capybara", "maps", "google-charts"
  ],
  "articleBody": "So I found out it’s not so documented, hopefully google will index this. I have a page on my system that shows a google geo chart (same as this) When clicking on a country on the map lot’s of interesting things happens. And I wanted to implement a ui automation test to cover this use case.\nIt’s not so easy cause even if you find the right svg path object and try clicking on it you get some interception errors. So I googled a bit without any luck, but the geo chart documents came to the rescue.\nThe easiest way is to run some javascript:\nvar yourChart = Chartkick.charts['counutries-map'].chart // Replace with code that gets your chart google.visualization.events.trigger(yourChart, 'regionClick', { region:'US' }); This code triggers an event on the chart object that the United States region was clicked. super simple and easy I’m using capybara and it looks like this:\npage.evaluate_script(\u003c\u003c~JS) function(){ var yourChart = Chartkick.charts['counutries-map'].chart // Replace with code that gets your chart google.visualization.events.trigger(yourChart, 'regionClick', { region:'US' }); }() JS It’s just injecting a self executing function to the page.\n",
  "wordCount" : "181",
  "inLanguage": "en",
  "datePublished": "2020-01-22T21:27:38+02:00",
  "dateModified": "2020-01-22T21:27:38+02:00",
  "author":{
    "@type": "Person",
    "name": "Chen Kinnrot"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://kinnrot.github.io/simulate-click-on-google-geo-chart/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "cdblg",
    "logo": {
      "@type": "ImageObject",
      "url": "https://kinnrot.github.io/favicon.ico"
    }
  }
}
</script>
</head>
<body id="top">
    <header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://kinnrot.github.io/" accesskey="h" title="cdblg (Alt + H)">cdblg</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      Simulate Click on Google Geo Chart
    </h1>
    <div class="post-meta"><span title='2020-01-22 21:27:38 +0200 IST'>January 22, 2020</span>&nbsp;·&nbsp;<span>Chen Kinnrot</span>

</div>
  </header> 
  <div class="post-content"><p>So I found out it&rsquo;s not so documented, hopefully google will index this.
I have a page on my  system that shows a google geo chart (same as <a href="https://developers.google.com/chart/interactive/docs/gallery/geochart">this</a>)
When clicking on a country on the map lot&rsquo;s of interesting things happens. And I wanted to implement a ui automation test to cover this use case.</p>
<p>It&rsquo;s not so easy cause even if you find the right svg path object and try clicking on it you get some interception errors.
So I googled a bit without any luck, but the geo chart documents came to the rescue.</p>
<p>The easiest way is to run some javascript:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">yourChart</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">Chartkick</span>.<span style="color:#a6e22e">charts</span>[<span style="color:#e6db74">&#39;counutries-map&#39;</span>].<span style="color:#a6e22e">chart</span> <span style="color:#75715e">// Replace with code that gets your chart
</span></span></span><span style="display:flex;"><span><span style="color:#a6e22e">google</span>.<span style="color:#a6e22e">visualization</span>.<span style="color:#a6e22e">events</span>.<span style="color:#a6e22e">trigger</span>(<span style="color:#a6e22e">yourChart</span>, <span style="color:#e6db74">&#39;regionClick&#39;</span>, { <span style="color:#a6e22e">region</span><span style="color:#f92672">:</span><span style="color:#e6db74">&#39;US&#39;</span> });
</span></span></code></pre></div><p>This code triggers an event on the chart object that the United States region was clicked. super simple and easy
I&rsquo;m using <a href="http://teamcapybara.github.io/capybara/">capybara</a> and it looks like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-ruby" data-lang="ruby"><span style="display:flex;"><span>    page<span style="color:#f92672">.</span>evaluate_script(<span style="color:#f92672">&lt;&lt;~</span><span style="color:#66d9ef">JS</span>)
</span></span><span style="display:flex;"><span>        function(){
</span></span><span style="display:flex;"><span>            var yourChart <span style="color:#f92672">=</span> <span style="color:#66d9ef">Chartkick</span><span style="color:#f92672">.</span>charts<span style="color:#f92672">[</span><span style="color:#e6db74">&#39;counutries-map&#39;</span><span style="color:#f92672">].</span>chart <span style="color:#e6db74">//</span> <span style="color:#66d9ef">Replace</span> with code that gets your chart
</span></span><span style="display:flex;"><span>            google<span style="color:#f92672">.</span>visualization<span style="color:#f92672">.</span>events<span style="color:#f92672">.</span>trigger(yourChart, <span style="color:#e6db74">&#39;regionClick&#39;</span>, { <span style="color:#e6db74">region</span>:<span style="color:#e6db74">&#39;US&#39;</span> });
</span></span><span style="display:flex;"><span>        }()
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">JS</span>
</span></span></code></pre></div><p>It&rsquo;s just injecting a self executing function to the page.</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://kinnrot.github.io/tags/browser-automation/">Browser-Automation</a></li>
      <li><a href="https://kinnrot.github.io/tags/testing/">Testing</a></li>
      <li><a href="https://kinnrot.github.io/tags/capybara/">Capybara</a></li>
      <li><a href="https://kinnrot.github.io/tags/maps/">Maps</a></li>
      <li><a href="https://kinnrot.github.io/tags/google-charts/">Google-Charts</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2026 <a href="https://kinnrot.github.io/">cdblg</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu');
    if (menu) {
        
        const scrollPosition = localStorage.getItem("menu-scroll-position");
        if (scrollPosition) {
            menu.scrollLeft = parseInt(scrollPosition, 10);
        }
        
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        const html = document.querySelector("html");
        if (html.dataset.theme === "dark") {
            html.dataset.theme = 'light';
            localStorage.setItem("pref-theme", 'light');
        } else {
            html.dataset.theme = 'dark';
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
